name: build-and-lint


#triggers
on:
  push :
    branches: [main, dev] 
  pull_request:
    branches: [main, dev]

jobs: 
  build-and-lint : 
    runs-on: ubuntu-latest

    steps:
      - name : Checkout repo
        uses: actions/checkout@v3

      - name : Setup node
        uses : actions/setup-node@v3
        with:
          node-version: 20
      
      - name : install backend dependencies
        working-directory: backend
        run : npm ci
      
      - name : lint Backend
        working-directory: backend
        run: npm run lint
      
      - name : install frontend dependencies
        working-directory: frontend
        run : npm ci
      
      - name : lint Frontend
        working-directory: frontend
        run : npm run lint
      
      # - name : build backend docker image
      #   working-directory: backend
      #   run : docker build -t devtinder-backend .

      # - name : build frontend docker image 
      #   working-directory:  frontend
      #   run : docker build -t devtinder-frontend .

      - name : build frontend's and backend's docker image
        run : docker-compose up -d --build